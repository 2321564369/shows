let getNavigation=function(e){var t;let l="none";if("object"==typeof e)for(var i=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT);t=i.nextNode();)if(8===t.nodeType&&"ENGINE_NAVIGATION"===t.nodeValue&&"ENGINE_NAVIGATION"!==t.nextSibling.nodeValue){l=t.nextSibling;break}return l},navigation=getNavigation(document.body),filterNavigation="none";$(function(){$("[data-dlefilter*=dle-filter] input, [data-dlefilter*=dle-filter] textarea").keypress(function(e){13==e.which&&(e.preventDefault(),s($(this).closest("form"),!0))});function n(e){dleFilter.id=("FORM"!==e?$(e).closest("form[data-dlefilter]"):$(e)).data("dlefilter-id")||"dle-content",dleFilter.original[dleFilter.id]||"dle-content"==dleFilter.id||(dleFilter.original[dleFilter.id]=$("#"+dleFilter.id).html())}let e=function(){dleFilter.reset=!0;var e=$(this).closest("form");let t=$(e).data("dlefilter");n(this),0==dleFilter.ajaxUrl&&(document.title=dleFilter.title,history.pushState(null,dleFilter.title,dleFilter.path)),"none"!==filterNavigation&&"dle-content"==dleFilter.id&&1==dleFilter.navApart&&$(getNavigation(document.body)).replaceWith(navigation),dleFilter.path.indexOf("/"+dleFilter.filterUrl+"/")+1||"dle-content"==dleFilter.id?$("#dle-content").html(dleFilter.content):$("#"+dleFilter.id).html(dleFilter.original[dleFilter.id]),1==dleFilter.lazy&&"undefined"!=typeof lazyLoadXT&&"function"==typeof lazyLoadXT&&$("[data-src]").lazyLoadXT(),1==dleFilter.lazy&&$("[data-src]").lazyLoadXT(),0<$("#dle-speedbar").length&&$("#dle-speedbar").html(dleFilter.speedbar),$(e).find('input[type="text"]').each(function(){var e=$(this).prop("name");0<e.length&&(e.indexOf("r.")+1?"single"==(e=$(this).data("ionRangeSlider")).options.type?e.update({from:e.options.min}):"double"==e.options.type&&e.update({from:e.options.min,to:e.options.max}):$(this).val(""),void 0!==$(this).data("dlefilter-show"))&&p(this)}),$(e).find("select").each(function(e){0<$(this).prop("name").length&&($(this).children("option").each(function(){$(this).prop("selected",!1)}),1==dleFilter.jsSelect&&0<$(".tail-select").length&&tail.select('[data-dlefilter*="'+t+'"] select[data-select-id="'+e+'"]').reload(),void 0!==$(this).data("dlefilter-show"))&&p(this)}),2==dleFilter.jsSelect&&(0<$(".chosen-results").length&&$('[data-dlefilter*="'+t+'"] select').trigger("chosen:updated"),$select[0].selectize.clear()),$("#dle-filter").find(".selectized").each(function(e,t){t.selectize&&t.selectize.clear()}),3==dleFilter.jsSelect&&$('[data-dlefilter*="'+t+'"] select').niceSelect("update"),$(e).find('input[type="radio"], input[type="checkbox"]').each(function(){0<$(this).prop("name").length&&($(this).prop("checked",!1),void 0!==$(this).data("dlefilter-show"))&&p(this)});var l=document.cookie.split(";");for(let e=0;e<l.length;e++){var i=l[e].trim();if(0===i.indexOf("catnewscount=")){a=parseInt(i.substring("catnewscount=".length,i.length));break}}document.getElementById("category-count").innerText=a,dleFilter.reset=!1};var a=document.getElementById("category-count").textContent,a=parseInt(a);document.cookie="catnewscount="+a+"; expires=Thu, 31 Dec 2025 23:59:59 UTC; path=/";function r(t){if("redirect"==(t=$.parseJSON(t)).content&&(dleFilter.ajax=1),1==dleFilter.ajax)window.location.href=t.url;else if(t.clean==dleFilter.defaultUrl)e();else{0<$("#dle-speedbar").length&&$("#dle-speedbar").html($("#dle-speedbar",t.speedbar).html());let e="";if(e=dleFilter.path.indexOf("/"+dleFilter.filterUrl+"/")+1?($("#dle-content").html(t.content),"#dle-content"):($("#"+dleFilter.id).html(t.content),"#"+dleFilter.id),t.player&&($(e+" .dleplyrplayer").length||$(e+" .dleplyrplayer").length||$(e+" .dlevideoplayer").length))if("plyr"==t.player){let t=Array.from(document.querySelectorAll(".dleplyrplayer:not(.dlepl)")).map(e=>new DLEPlayer(e));t.forEach(function(l,e){l.on("play",function(){t.forEach(function(e,t){l!=e&&e.pause()})})})}else $(".dleaudioplayer:not(.alreadyLoaded)").addClass("alreadyLoaded").cleanaudioplayer(),$(".dlevideoplayer:not(.alreadyLoaded)").addClass("alreadyLoaded").cleanvideoplayer();1===dleFilterId?($("pre").removeAttr("class"),$("pre").each(function(){$(this).find("code").length||$(this).wrapInner("<code>")}),hljs.highlightAll()):0===dleFilterId&&$("pre code:not([class])").each(function(e,t){hljs.highlightBlock(t,null)}),"none"!==navigation&&t.nav&&"dle-content"==dleFilter.id&&1==dleFilter.navApart?(filterNavigation=t.nav,navigation=getNavigation(document.body),$(navigation).replaceWith(t.nav)):t.nav||1!=dleFilter.navApart||(navigation=getNavigation(document.body)).remove(),1==dleFilter.lazy&&$("[data-src]").lazyLoadXT(),1==dleFilter.lazy&&"undefined"!=typeof lazyLoadXT&&"function"==typeof lazyLoadXT&&$("[data-src]").lazyLoadXT(),0==dleFilter.ajaxUrl&&(history.pushState(null,t.title,t.clean),document.title=t.title)}}function d(e){return e.valueOf()}function c(e){return e=e.toString().split(","),!!(Array.isArray(e)&&3===e.length&&(e[0]=parseInt(e[0]),e[1]=parseInt(e[1]),e[2]=parseInt(e[2]),0<e[0])&&0<e[1]&&e[1]<=12&&0<e[2]&&e[2]<=31)&&e}let s=function(i,a){if(!dleFilter.reset){$('[data-dlefilter*=dle-filter] input[name*="r."]').each(function(){var t=$(this).attr("name");if(void 0!==t&&0<t.length){t=$(this).data("ionRangeSlider");let e=0;"single"==t.options.type?e=t.options.min:"double"==t.options.type&&(e=t.options.min+";"+t.options.max),e==$(this).val()&&$(this).val("")}});let e,t,l="";if(!0===(a=a||!1))e=$(i).serialize();else{if(t=i.target.tagName.toUpperCase(),void 0!==i.target.type&&(l=i.target.type.toUpperCase()),"TEXTAREA"===t||"INPUT"===t&&("TEXT"===l||"RESET"===l))return;e=("FORM"!==t?$(this).closest("form"):$(this)).serialize()}n(t),$.ajax({beforeSend:function(){0==dleFilter.hideLoading&&ShowLoading("")},url:dle_root+"engine/lazydev/dle_filter/ajax.php",type:"POST",data:{data:e,url:dleFilter.path,dle_hash:dle_login_hash,dleFilterJSData:dleFilterJSData},success:function(e){e.error?DLEalert(e.text,dle_info):(r(e),e=JSON.parse(e).title,e=parseInt(e.replace(/\D+/g,"")),document.getElementById("category-count").innerText=0<=e?e:"0")},error:function(e){r(e.responseText)}}).always(function(){0==dleFilter.hideLoading&&HideLoading("")})}};0<$("#dle-speedbar").length&&(dleFilter.speedbar=$("#dle-speedbar").html()),0<$("#dle-content").length&&(dleFilter.content=$("#dle-content").html()),$("body").on("click","[data-dlefilter=submit]",s),0==dleFilter.button&&$("body").on("change","[data-dlefilter*=dle-filter]",s),$("body").on("click","[data-dlefilter=reset]",e);$("[data-dlefilter*=dle-filter]").find('input[type="text"][name*="r."]').each(function(){let t=$(this).data("slider-config");var l=$(this).data("slider-type");let i=$(this).data("slider-lang");var e=$(this).data("slider-mark");let a="";if(void 0!==t&&0<t.length){let o={};t=(t=";"===t.slice(-1)?t.slice(0,-1):t).split(";");for(let e=0;e<t.length;e++){var n=t[e].split(":");switch(n[0]=n[0].trim(),n[0]){case"АвтоПолзунок":case"AutoSlider":o.slider=!0;break;case"Одиночный слайдер":case"Single":o.type="single";break;case"Двойной слайдер":case"Double":o.type="double";break;case"Минимальное значение":case"Min":void 0!==n[1]&&($.isNumeric(n[1])?o.min=n[1]:"date"===l&&!1!==(a=c(n[1]))&&(o.min=d(new Date(a[0],a[1]-1,a[2]))));break;case"Максимальное значение":case"Max":void 0!==n[1]&&($.isNumeric(n[1])?o.max=n[1]:"date"===l&&!1!==(a=c(n[1]))&&(o.max=d(new Date(a[0],a[1]-1,a[2]))));break;case"Начало слайдера":case"Start":void 0!==n[1]&&($.isNumeric(n[1])?o.from=n[1]:"date"===l&&!1!==(a=c(n[1]))&&(o.from=d(new Date(a[0],a[1]-1,a[2]))));break;case"Конец слайдера":case"End":void 0!==n[1]&&($.isNumeric(n[1])?o.to=n[1]:"date"===l&&!1!==(a=c(n[1]))&&(o.to=d(new Date(a[0],a[1]-1,a[2]))));break;case"Шаг":case"Step":void 0!==n[1]&&$.isNumeric(n[1])&&(o.step=n[1]);break;case"Шаблон":case"Tpl":void 0!==n[1]&&""!==n[1]&&(o.skin=n[1]);break;case"Префикс":case"Prefix":void 0!==n[1]&&""!==n[1]&&(o.prefix=n[1]);break;case"Постфикс":case"Postfix":void 0!==n[1]&&""!==n[1]&&(o.postfix=n[1]);break;case"Сетка":case"Grid":o.grid=!0;break;case"Красивые числа":case"Numbers":o.prettify_enabled=!0;break;case"Скрыть MinMax":case"Hide MinMax":o.hide_min_max=!0;break;case"Скрыть FromTo":case"Hide FromTo":o.hide_from_to=!0}}if(void 0===o.from&&(o.from=o.min),void 0===o.to&&(o.to=o.max),e){let d=e.toString().split(",");o.onStart=function(e){{e=e.slider;var l=o,i=d,a,n;let t="";for(let e=0;e<i.length;e++){var r=i[e].toString().split("|");a=parseInt(r[0]),n=l.min,t+='<span class="sliderShowcaseMark" style="left: '+((a-n)/(l.max-n)*100+"%")+'">'+r[1]+"</span>"}e.append(t)}}}"date"===l&&(o.prettify=function(e){return new Date(e).toLocaleDateString(i,{year:"numeric",month:"long",day:"numeric"})}),o.prettify_enabled||"date"===l||(o.prettify_enabled=!1),o.slider&&(o.onFinish=function(e){s($('[name="'+e.input[0].name+'"]').closest("form"),!0)}),$(this).ionRangeSlider(o)}}),1==dleFilter.jsSelect&&$("[data-dlefilter*=dle-filter]").find("select").each(function(e){$(this).attr("data-select-id",e);let t=$(this).data("select-config");var l={};if(void 0!==t&&0<t.length){t=(t=";"==t.slice(-1)?t.slice(0,-1):t).split(";");for(let e=0;e<t.length;e++){var i=t[e].split(":");switch(i[0]){case"Поиск":case"Search":l.search=!0;break;case"Скрыть выбранные":case"Hide":l.hideSelected=!0;break;case"Максимум выбрать":case"Max":void 0!==i[1]&&$.isNumeric(i[1])&&(l.multiLimit=i[1]);break;case"Показать количество выбранных":case"Num":l.multiContainer||(l.multiShowCount=!0);break;case"Вывод выбранных":case"Show":l.multiContainer=!0,l.multiShowCount&&(l.multiShowCount=!1);break;case"Подсказка":case"Prompt":void 0!==i[1]&&""!==i[1]&&(l.placeholder=i[1]);break;case"Язык":case"Lang":void 0!==i[1]&&""!=i[1].trim()||(i[1]="ru"),l.locale=i[1];break;case"Сортировать":case"Sort":void 0===i[1]||"ASC"!==i[1]&&"DESC"!==i[1]||(l.sortItems=i[1])}}}null==l.locale&&(l.locale="ru"),l.deselect=!0,tail.select('[data-dlefilter*=dle-filter] select[data-select-id="'+e+'"]',l).on("change",function(e,t){e=("OPTGROUP"===e.option.parentElement.tagName.toUpperCase()?e.option.parentElement:e.option).parentElement.name;"unselect"!==t||$('[name="'+e+'"] option:selected')||$('[name="'+e+'"]').val(""),0==dleFilter.button&&$('[name="'+e+'"]').trigger("change")})}),2==dleFilter.jsSelect&&$("[data-dlefilter*=dle-filter] select").chosen(),3==dleFilter.jsSelect&&$("[data-dlefilter*=dle-filter] select").niceSelect();function t(i,a){void 0!==i&&$.ajax({url:i,beforeSend:function(){0==dleFilter.hideLoading&&ShowLoading("")},success:function(e){var t,l;0<$("#dle-speedbar").length&&$("#dle-speedbar").html($("#dle-speedbar",e).html()),"none"!==navigation&&1==dleFilter.navApart&&(t=(new DOMParser).parseFromString(e,"text/html"),t=getNavigation(t),l=getNavigation(document.body),filterNavigation=t,$(l).replaceWith(t)),(window.location.href.toString().indexOf(a)+1?$("#dle-content"):$("#"+dleFilter.id)).html($("#dle-content",e).html()),1==dleFilter.lazy&&$("[data-src]").lazyLoadXT(),1==dleFilter.lazy&&"undefined"!=typeof lazyLoadXT&&"function"==typeof lazyLoadXT&&$("[data-src]").lazyLoadXT(),0==dleFilter.ajaxUrl&&(l=$(e).filter("title").text(),window.history.pushState(l,"",i),""!=l)&&(document.title=$(e).filter("title").text()),0==dleFilter.ajaxAnim&&$("html, body").animate({scrollTop:$("body").offset().top},400)},error:function(e){}}).always(function(){0==dleFilter.hideLoading&&HideLoading("")})}1==dleFilter.ajaxPage&&0!=urlFilter&&$("body").on("click",'a[href*="'+urlFilter+'"]',function(e){e.preventDefault(),dleFilter.id="dle-content";e=$(this).attr("href");return t(e,urlFilter),!1}),1==dleFilter.ajaxNav&&$("body").on("click",'a[href*="/'+dleFilter.filterUrl+'/"]',function(e){e.preventDefault(),n(this);e=$(this).attr("href");return t(e,"/"+dleFilter.filterUrl+"/"),!1}),Array.prototype.diff=function(t){return this.filter(function(e){return t.indexOf(e)<0})};let o={},f={},h={},p=function(l){var e=$(l).prop("tagName").toUpperCase();let i=$(l).prop("type").toUpperCase(),t=$(l).data("dlefilter-show"),a={};t=(t=";"==t.slice(-1)?t.slice(0,-1):t).split(";"),$.each(t,function(e,t){t=t.split(":");t[0]&&t[1]&&(a[t[0]]=t[1].split(","))}),"SELECT"===e?$(l).find("option").each(function(e,l){$.each(a,function(e,t){0<$(l).val().toString().length&&$(l).prop("selected")&&0<=$.inArray($(l).val(),t)?1==dleFilter.jsSelect?o[e]=".dle-filter-select-"+e:o[e]='[data-dlefilter-hide="'+e+'"]':1==dleFilter.jsSelect?f[e]=".dle-filter-select-"+e:f[e]='[data-dlefilter-hide="'+e+'"]'})}):"INPUT"===e?$.each(a,function(e,t){"TEXT"===i?0<=$.inArray($(l).val(),t)?o[e]='[data-dlefilter-hide="'+e+'"]':f[e]='[data-dlefilter-hide="'+e+'"]':"RADIO"!==i&&"CHECKBOX"!==i||($(l).prop("checked")&&0<=$.inArray($(l).val(),t)?o[e]='[data-dlefilter-hide="'+e+'"]':f[e]='[data-dlefilter-hide="'+e+'"]')}):"TEXTAREA"===e&&$.each(a,function(e,t){0<=$.inArray($(l).val(),t)?o[e]='[data-dlefilter-hide="'+e+'"]':f[e]='[data-dlefilter-hide="'+e+'"]'});e=Object.values(f);let n=Object.values(o);(h=e.filter(e=>!n.includes(e)))&&$.each(h,function(e,t){$(t).find('input[type="text"]').each(function(){var e=$(this).prop("name");void 0!==$(this).data("dlefilter-show")&&p(this),0<e.length&&(e.indexOf("r.")+1?(e=$(this).data("ionRangeSlider")).update({from:e.options.min,to:e.options.max}):$(this).val(""))}),$(t).find("select").each(function(e){0<$(this).prop("name").length&&(void 0!==$(this).data("dlefilter-show")&&p(this),$(this).children("option").each(function(){$(this).attr("selected",!1)}),1==dleFilter.jsSelect)&&0<$(".tail-select").length&&tail.select('[data-dlefilter*=dle-filter] select[data-select-id="'+e+'"]').reload()}),2==dleFilter.jsSelect&&0<$(".chosen-results").length&&$("[data-dlefilter*=dle-filter] select").trigger("chosen:updated"),3==dleFilter.jsSelect&&$("[data-dlefilter*=dle-filter] select").niceSelect("update"),$(t).find('input[type="radio"], input[type="checkbox"]').each(function(){0<$(this).prop("name").length&&(void 0!==$(this).data("dlefilter-show")&&p(this),$(this).attr("checked",!1))})})};if(dleFilter.path.indexOf("/"+dleFilter.filterUrl+"/")+1){let t=decodeURIComponent(location.href).split("/"+dleFilter.filterUrl+"/");if(t[1]){"/"===t[1].slice(-1)&&(t[1]=t[1].slice(0,-1)),t=t[1].split("/");let a=[];for(let e=0;e<t.length;e++)a[e]=t[e].split("="),a[e][1]&&(a[e][0]=a[e][0].replace(/\+/g," "),a[e][1]=a[e][1].replace(/\+/g," "));$('[data-dlefilter*=dle-filter] input[type="text"], [data-dlefilter*=dle-filter] textarea').each(function(){var t,l,i=$(this).attr("name");if(void 0!==i&&0<i.length)for(let e=0;e<a.length;e++)i===a[e][0]&&(i.indexOf("r.")+1?(t=$(this).data("ionRangeSlider"),l=a[e][1].split(";"),"single"==t.options.type?t.update({from:l[0]}):"double"==t.options.type&&t.update({from:l[0],to:l[1]})):$(this).val(a[e][1]))}),$("[data-dlefilter*=dle-filter] select").each(function(e){var t=$(this).attr("name");if(void 0!==t&&0<t.length){for(let e=0;e<a.length;e++)if(t===a[e][0]){let l=[];t.indexOf("c.")+1?l[0]=a[e][1]:l=a[e][1].split(","),$(this).find("option").each(function(e,t){0<=$.inArray(t.value,l)&&$(this).attr("selected",!0)})}1==dleFilter.jsSelect&&0<$(".tail-select").length&&tail.select('[data-dlefilter*=dle-filter] select[data-select-id="'+e+'"]').reload()}}),2==dleFilter.jsSelect&&0<$(".chosen-results").length&&$("[data-dlefilter*=dle-filter] select").trigger("chosen:updated"),3==dleFilter.jsSelect&&$("[data-dlefilter*=dle-filter] select").niceSelect("update"),$('[data-dlefilter*=dle-filter] input[type="radio"], [data-dlefilter*=dle-filter] input[type="checkbox"]').each(function(){var t=$(this).attr("name");if(void 0!==t&&0<t.length)for(let e=0;e<a.length;e++)if(t===a[e][0]){let l=a[e][1].split(",");$(this).each(function(e,t){0<=$.inArray(t.value,l)&&$(this).attr("checked","checked")})}})}}$("[data-dlefilter-hide]").hide(),$("body").find("[data-dlefilter-show]").each(function(e,t){f={},h={},o={},p(t),h&&$(h.join(", ")).hide(),o&&$(Object.values(o).join(", ")).show()}),$("body").on("change","[data-dlefilter-show]",function(e){f={},h={},o={},$("body").find("[data-dlefilter-show]").each(function(e,t){p(t)}),h&&$(h.join(", ")).hide(),o&&$(Object.values(o).join(", ")).show()})});